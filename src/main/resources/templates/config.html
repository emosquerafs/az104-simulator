<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Configure Exam - AZ-104 Simulator</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <div class="container">
        <header class="header">
            <h1>Configure Your <span th:text="${config.mode}">Exam</span></h1>
            <a th:href="@{/}" class="btn-back">Back to Home</a>
        </header>

        <main class="main-content">
            <form th:action="@{/attempt/start}" method="post" th:object="${config}" class="config-form">
                <input type="hidden" th:field="*{mode}">

                <div class="form-section">
                    <h3>Basic Settings</h3>

                    <div class="form-group">
                        <label for="numberOfQuestions">Number of Questions:</label>
                        <input type="number" id="numberOfQuestions" th:field="*{numberOfQuestions}"
                               min="1" max="100" required>
                    </div>

                    <div class="form-group" th:if="${config.mode.name() == 'EXAM'}">
                        <label for="timeLimitMinutes">Time Limit (minutes):</label>
                        <input type="number" id="timeLimitMinutes" th:field="*{timeLimitMinutes}"
                               min="10" max="300" required>
                    </div>

                    <div class="form-group" th:if="${config.mode.name() == 'PRACTICE'}">
                        <label>
                            <input type="checkbox" th:field="*{showExplanationsImmediately}">
                            Show explanations immediately after answering
                        </label>
                    </div>
                </div>

                <div class="form-section">
                    <h3>Select Domains</h3>
                    <p class="help-text">Leave all unchecked to include all domains</p>

                    <div class="domain-checkboxes">
                        <div class="form-group" th:each="domain : ${domains}">
                            <label>
                                <input type="checkbox" th:field="*{selectedDomains}" th:value="${domain}">
                                <span th:text="${domain.displayName}">Domain</span>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="form-section" th:if="${config.mode.name() == 'EXAM'}">
                    <h3>Advanced: Domain Distribution (%)</h3>
                    <p class="help-text">Adjust percentage of questions per domain (must total ~100%)</p>

                    <div class="distribution-grid">
                        <div class="form-group">
                            <label for="identityPercentage">Identity & Governance:</label>
                            <input type="number" id="identityPercentage" th:field="*{identityPercentage}"
                                   min="0" max="100">
                        </div>

                        <div class="form-group">
                            <label for="storagePercentage">Storage:</label>
                            <input type="number" id="storagePercentage" th:field="*{storagePercentage}"
                                   min="0" max="100">
                        </div>

                        <div class="form-group">
                            <label for="computePercentage">Compute:</label>
                            <input type="number" id="computePercentage" th:field="*{computePercentage}"
                                   min="0" max="100">
                        </div>

                        <div class="form-group">
                            <label for="networkingPercentage">Networking:</label>
                            <input type="number" id="networkingPercentage" th:field="*{networkingPercentage}"
                                   min="0" max="100">
                        </div>

                        <div class="form-group">
                            <label for="monitorPercentage">Monitor & Maintain:</label>
                            <input type="number" id="monitorPercentage" th:field="*{monitorPercentage}"
                                   min="0" max="100">
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <button type="submit" class="btn btn-primary btn-large">
                        Start <span th:text="${config.mode}">Exam</span>
                    </button>
                </div>
            </form>
        </main>
    </div>
</body>
</html>
